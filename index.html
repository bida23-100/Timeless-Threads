<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeless Threads Receipt Sender</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        .header img {
            height: 30px;
            margin-right: 10px;
        }
        .header h1 {
            font-size: 18px;
            margin: 0;
        }
        .input-section, .preview-section {
            margin: 15px 0;
        }
        label {
            display: block;
            font-size: 14px;
            margin-bottom: 5px;
        }
        input[type="tel"], input[type="email"], input[type="number"], input[type="text"] {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 10px;
        }
        .item-entry {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .item-entry input[type="text"] {
            flex: 2;
        }
        .item-entry input[type="number"] {
            flex: 1;
        }
        .item-entry button {
            padding: 5px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .add-item {
            background: #007bff;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 14px;
        }
        .checkboxes {
            display: flex;
            gap: 20px;
            margin: 15px 0;
        }
        .preview-section pre {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .buttons {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }
        .buttons button {
            flex: 1;
            padding: 12px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .send-btn {
            background: #28a745;
            color: white;
        }
        .clear-btn {
            background: #ffc107;
            color: black;
        }
        .back-btn {
            background: #6c757d;
            color: white;
        }
        .status {
            margin-top: 10px;
            font-size: 14px;
            color: #333;
            text-align: center;
        }
        @media (max-width: 400px) {
            .container {
                padding: 10px;
            }
            .header h1 {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://via.placeholder.com/30" alt="Timeless Threads Logo">
            <h1>Timeless Threads Receipt Sender</h1>
        </div>
        <div class="input-section">
            <label for="phone">Customer Phone Number</label>
            <input type="tel" id="phone" placeholder="+267 71 234 567">
            <label for="email">Customer Email</label>
            <input type="email" id="email" placeholder="customer@example.com">
            <label for="amount">Purchase Amount (P)</label>
            <input type="number" id="amount" step="0.01" placeholder="45.99">
            <label>Items</label>
            <div id="item-list">
                <div class="item-entry">
                    <input type="text" class="item-name" placeholder="Item name">
                    <input type="number" class="item-price" step="0.01" placeholder="Price">
                    <button onclick="removeItem(this)">x</button>
                </div>
            </div>
            <button class="add-item" onclick="addItem()">+ Add Item</button>
            <div class="checkboxes">
                <label><input type="checkbox" id="send-text"> Send via Text</label>
                <label><input type="checkbox" id="send-email"> Send via Email</label>
            </div>
        </div>
        <div class="preview-section">
            <h3>Receipt Preview</h3>
            <pre id="preview">Timeless Threads
Purchase Amount: P0.00
Items:
- None
Date: 04/07/2025
Thank you for shopping with us!</pre>
        </div>
        <div class="buttons">
            <button class="send-btn" onclick="sendReceipt()">Send Receipt</button>
            <button class="clear-btn" onclick="clearForm()">Clear Form</button>
            <button class="back-btn" onclick="backToPOS()">Back to POS</button>
        </div>
        <div class="status" id="status"></div>
    </div>

    <script>
        function addItem() {
            const itemList = document.getElementById('item-list');
            const newItem = document.createElement('div');
            newItem.className = 'item-entry';
            newItem.innerHTML = `
                <input type="text" class="item-name" placeholder="Item name">
                <input type="number" class="item-price" step="0.01" placeholder="Price">
                <button onclick="removeItem(this)">x</button>
            `;
            itemList.appendChild(newItem);
            updatePreview();
        }

        function removeItem(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function updatePreview() {
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const amount = document.getElementById('amount').value || '0.00';
            const items = Array.from(document.getElementsByClassName('item-entry')).map(entry => {
                const name = entry.querySelector('.item-name').value;
                const price = entry.querySelector('.item-price').value;
                return name && price ? `- ${name}: P${parseFloat(price).toFixed(2)}` : null;
            }).filter(item => item);
            const preview = document.getElementById('preview');
            preview.textContent = `Timeless Threads
Purchase Amount: P${parseFloat(amount).toFixed(2)}
Items:
${items.length ? items.join('\n') : '- None'}
Date: 04/07/2025
Thank you for shopping with us!`;
        }

        function validateInputs() {
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const amount = document.getElementById('amount').value;
            const sendText = document.getElementById('send-text').checked;
            const sendEmail = document.getElementById('send-email').checked;
            const items = Array.from(document.getElementsByClassName('item-entry')).map(entry => ({
                name: entry.querySelector('.item-name').value,
                price: entry.querySelector('.item-price').value
            }));

            if (!sendText && !sendEmail) {
                return "Please select at least one delivery method (Text or Email).";
            }
            if (sendText && !phone.match(/^\+267\d{8}$/)) {
                return "Please enter a valid Botswana phone number (e.g., +26771234567).";
            }
            if (sendEmail && !email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                return "Please enter a valid email address.";
            }
            if (!amount || amount <= 0) {
                return "Please enter a valid purchase amount.";
            }
            if (!items.some(item => item.name && item.price > 0)) {
                return "Please add at least one valid item with name and price.";
            }
            return null;
        }

        function sendReceipt() {
            const status = document.getElementById('status');
            const error = validateInputs();
            if (error) {
                status.textContent = error;
                return;
            }
            status.textContent = "Sending receipt... (Backend not implemented)";
            // TODO: Add backend API calls for SMS/email
        }

        function clearForm() {
            document.getElementById('phone').value = '';
            document.getElementById('email').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('send-text').checked = false;
            document.getElementById('send-email').checked = false;
            const itemList = document.getElementById('item-list');
            itemList.innerHTML = `
                <div class="item-entry">
                    <input type="text" class="item-name" placeholder="Item name">
                    <input type="number" class="item-price" step="0.01" placeholder="Price">
                    <button onclick="removeItem(this)">x</button>
                </div>
            `;
            document.getElementById('status').textContent = '';
            updatePreview();
        }

        function backToPOS() {
            document.getElementById('status').textContent = 'Returning to POS...';
            // TODO: Redirect to POS system
        }

        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', updatePreview);
        });
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', updatePreview);
        });

        updatePreview();
    </script>
</body>
</html>